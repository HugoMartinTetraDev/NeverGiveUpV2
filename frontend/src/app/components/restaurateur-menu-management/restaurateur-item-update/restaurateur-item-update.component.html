<div class="item-update">
    <div class="dialog-header">
      <h2>Edition article</h2>
      <button mat-icon-button (click)="onCancel()">
        <mat-icon>close</mat-icon>
      </button>
    </div>
    
    <mat-divider></mat-divider>
    
    <form #itemForm="ngForm" class="dialog-content">
      <mat-form-field appearance="outline" class="full-width">
        <mat-label>Nom</mat-label>
        <input matInput placeholder="ex : Classic Burger" 
               [(ngModel)]="item.name" name="name" required>
        <mat-icon matSuffix>restaurant_menu</mat-icon>
      </mat-form-field>

      <div class="photo-upload">
        <label>Photo</label>
        <div class="upload-container">
          <input type="file" #fileInput style="display: none" 
                 accept="image/*" (change)="onFileSelected($event)">
          <button mat-raised-button color="primary" (click)="fileInput.click()">
            <mat-icon>upload</mat-icon>
            PARCOURIR LES FICHIERS
          </button>
          @if (item.image) {
            <div class="image-preview">
              <img [src]="item.image" [alt]="item.name">
              <button mat-icon-button color="warn" class="remove-image"
                      (click)="removeImage()">
                <mat-icon>delete</mat-icon>
              </button>
            </div>
          }
        </div>
      </div>

      <mat-form-field appearance="outline" class="full-width">
        <mat-label>Description (optionnelle)</mat-label>
        <textarea matInput placeholder="ex : Pain, salade, tomate, oignon..."
                  [(ngModel)]="item.description" name="description"
                  rows="3"></textarea>
        <mat-icon matSuffix>description</mat-icon>
      </mat-form-field>

      <mat-form-field appearance="outline">
        <mat-label>Prix</mat-label>
        <input matInput type="number" placeholder="ex : 8.00 â‚¬"
               [(ngModel)]="item.price" name="price" required
               min="0" step="0.50">
        <mat-icon matSuffix>euro</mat-icon>
      </mat-form-field>
    </form>
    
    <mat-divider></mat-divider>

    <div class="dialog-actions">
      <button mat-button (click)="onCancel()">ANNULER</button>
      <button mat-raised-button color="primary" 
              (click)="onSave()" [disabled]="!itemForm.valid">
        SAUVEGARDER
      </button>
    </div>
  </div>